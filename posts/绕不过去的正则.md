
---
title: ç»•ä¸è¿‡å»çš„æ­£åˆ™
tags: js re
date: 2017-7-2 09:48:39
---
### æ­£åˆ™çš„å±æ€§

æ­£åˆ™æ€ªå¼‚çš„å†™æ³•ï¼Œå¸¸å¸¸è®©äººæœ›è€Œå´æ­¥ï¼Œä½†æ˜¯åªè¦æˆ‘ä»¬è¦å¤„ç†`string`,æ­£åˆ™ä¾¿ç»•ä¸è¿‡å»ã€‚æ‰€ä»¥è¿™é‡Œç³»ç»Ÿæ•´ç†ä¸€ä¸‹ï¼Œæƒå½“ç¬”è®°ã€‚

æ‡’çš„ä¸æƒ³å†™ï¼Œä¸€å®šè¡¥ä¸Š

### æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•
æœ‰ä¸¤ç§æ–¹å¼å¾—åˆ°ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å®ä¾‹ï¼Œè°ƒç”¨æ„é€ å‡½æ•°,æˆ–è€…å­—é¢é‡å†™æ³•,å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„å¯¹è±¡ã€‚
```js
var a = /a/i;
var b = new RegExp('b','i');
```
### RegExp.prototypeä¸Šçš„å±æ€§
æ­£åˆ™åŸå‹ä¸Šçš„å±æ€§,å¤§éƒ¨åˆ†å±æ€§æ˜¯å¯¹æ­£åˆ™è¡¨è¾¾å¼æœ‰æ²¡æœ‰g,m,i,uè¿™äº›flagçš„æè¿°ã€‚è¿™äº›å®Œå…¨å¯ä»¥ä»å­—é¢é‡ä¸Šçœ‹å‡ºæ¥,æ‰€ä»¥ä¸€èˆ¬ç”¨ä¸åˆ°,ä¸è¿‡sourceå±æ€§å¯ä»¥å¾—åˆ°\/\/é‡Œé¢çš„å­—ç¬¦,è¿™ä¸ªæ˜¯è°ƒç”¨toStringåšä¸åˆ°çš„:
```js
var a = /a/gmi;
a.flags //"gim"
a.global //true 'g'
a.ignoreCase//true 'i'
a.multiline//true 'm'
a.unicode//false
a.sticky//false
a.source // 'a'
```
### æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹çš„å±æ€§--lastIndex
```js
a.lastIndex //0
a.test('cba')//true
a.lastIndex//3
```
æ¯ç”Ÿæˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹ä¼šæœ‰ä¸Šé¢çš„ç»§æ‰¿è‡ªåŸå‹çš„å±æ€§ï¼Œå’Œå®ä¾‹è‡ªå·±çš„`lastIndex`å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šè®°å½•æ­£åˆ™ä¸Šä¸€æ¬¡åŒ¹é…åˆ°çš„ä½ç½®,å’Œtestæ–¹æ³•æ˜¯ä¸€å¯¹å¥½ğŸ‘¬,ä¸‹çš„ä»£ç å±•ç¤ºäº†ä»–ä»¬ä¸åŒå¯»å¸¸çš„å…³ç³»
```js
var b = /b/g
var str = 'bababa'
b.lastIndex //0
b.test(str)//true
b.lastIndex//1
b.test(str)//true
b.lastIndex//3
b.test(str)//true ä»str[3]å¼€å§‹åŒ¹é…
b.lastIndex//5 åˆ°è¾¾æœ«å°¾
b.test(str)//false
b.lastIndex//0
```
lastIndexä¸ä»…å¯è¯»,è¿˜æ˜¯ä¸€ä¸ªå¯å†™çš„å±æ€§ï¼Œæ¯”å¦‚è®©æ­£åˆ™ä»ç¬¬4ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é…å¯ä»¥è¿™ä¹ˆå†™:

```js
b.lastIndex = 4;
b.test(str)//true åˆ°åº•äº†
b.test(str)//false
```
### RegExpåŸå‹ä¸Šçš„æ–¹æ³•
å¸¸ç”¨çš„ä¸»è¦æœ‰`exec()`,`test()`æ–¹æ³•,ä¸Šé¢çš„ä¾‹å­å·²ç»è¯´æ˜äº†test()æ–¹æ³•çš„ä¸€éƒ¨åˆ†ç‰¹æ€§,è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼,å¦‚æœæ˜¯å…¨å±€åŒ¹é…,åˆ™æ¯è°ƒç”¨ä¸€æ¬¡test()æ–¹æ³•,åªè¦åŒ¹é…æˆåŠŸäº†,æ­£åˆ™å®ä¾‹çš„lastIndexéƒ½ä¼šå‘ç”Ÿæ”¹å˜,åŒæ—¶ä¸‹ä¸€æ¬¡åŒ¹é…ä¼šä»lastIndexçš„ä½ç½®å¼€å§‹,ç›´åˆ°å­—ç¬¦ä¸²æœ«å°¾.ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹`exec()`æ–¹æ³•æ˜¯ä¸æ˜¯ä¼šæœ‰ä¸€æ ·çš„ç‰¹æ€§:
```js
var b = /b/g;
var str = 'bababa';
b.exec(str) //[ 'b', index: 0, input: 'bababa' ]
b.lastIndex //1
b.exec(str) //[ 'b', index: 2, input: 'bababa' ]
b.lastIndex //3
b.exec(str) //[ 'b', index: 4, input: 'bababa' ]
b.lastIndex //5
b.exec(str) //null
b.exec(str) //[ 'b', index: 0, input: 'bababa' ]
```
å¯ä»¥çœ‹å‡ºåœ¨è®°å½•ä¸Šä¸€æ¬¡åŒ¹é…ä½ç½®çš„ç‰¹ç‚¹ä¸Šé¢,è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ç›¸åŒçš„.ä½†æ˜¯,ä»è¿”å›å€¼ä¸Šçœ‹,execè¿”å›ä¸€ä¸ªåŒ…å«æ›´å…¨é¢çš„ä¿¡æ¯çš„æ•°ç»„,åŒ…æ‹¬åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²,åŒ¹é…æˆåŠŸçš„ä½ç½®,è¾“å…¥çš„å­—ç¬¦ä¸²ç­‰.æ‰€ä»¥execæ–¹æ³•æ˜¯æ›´å…¨é¢çš„æ–¹æ³•.
### RegExpæ„é€ å‡½æ•°ä¸Šçš„å¥‡è‘©å±æ€§
å¦‚æœä½ åœ¨æ§åˆ¶å°é‡Œè¾“å…¥`console.dir(RegExp)`,ä¼šçœ‹åˆ°ä¸‹é¢çš„ç”»é¢:
![](http://images2015.cnblogs.com/blog/1016471/201707/1016471-20170703224536550-1189911897.png)
è¿™è®©æˆ‘ä»¬ä¸ç¦æƒ³åˆ°äº†é‚£å¥è¯:
>è€é¼ çš„å„¿å­ä¼šæ‰“æ´

æ­£åˆ™é•¿çš„å¥‡å½¢æ€ªçŠ¶,è¿å®ƒçš„å±æ€§éƒ½ä¸€è‚¡æ»¡æ»¡çš„æ­£åˆ™é£ğŸ˜±,é™¤äº†å‡ ä¸ªå°‘æ•°æ­£å¸¸çš„ä¹‹å¤–,çº·çº·éƒ½æ˜¯`$`å­—è¾ˆçš„,`$`å­—è¾ˆåœ¨jsç•Œå¯ä»¥ç®—çš„ä¸Šå¤§åé¼é¼äº†,ä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸ªä¸ªçœ‹ä¸€ä¸‹è¿™äº›`$`å­—è¾ˆçš„å±æ€§:

##### $1-$9
è¿™å‡ ä¸ªå±æ€§æ˜¯ç”¨æ¥å­˜æ”¾è¢«æ•è·çš„å­—ç¬¦ä¸²çš„,ä¹Ÿå°±æ˜¯æ‹¬å·é‡ŒåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²,å½“ç„¶å¯¹äº`exec()`æ–¹æ³•æ„ä¹‰ä¸å¤ªå¤§.é€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹ä¸€ä¸‹:

```js
var re = /a(b(c(d(ef)g)h))/;
var str = 'abcdefghij';
re.test(str) //true
RegExp.$1 //"bcdefgh"
RegExp.$2 //"cdefgh"
RegExp.$3 //"defg"
RegExp.$4 //"ef"
RegExp.$5 //""
re.exec(str) //["abcdefgh", "bcdefgh", "cdefgh", "defg", "ef", index: 0, input: "abcdefghij"]
RegExp.$1 //"bcdefgh"
RegExp.$2 //"cdefgh"
......
```
##### $&,RegExp.lastMatchçš„åˆ«å
è¡¨ç¤ºä¸Šæ¬¡åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œç­‰åŒäºlastMatchå±æ€§:
```js
var re = /\d/g;
var re2 = /\d{2}/g
var str = '123456';
re.test(str);
RegExp['$&']//1
re.test(str);
RegExp['$&']//2
```
##### $_ ï¼ŒRegExp.inputçš„åˆ«å
```js
var re = /a/g;
re.test('a')
RegExp.$_//'a'
var str = 'bcde';
re.test(str);
RegExp.$_//'a'
```
è¿™ä¸ªé™æ€å±æ€§åªæœ‰åœ¨è¾“å…¥å­—ç¬¦ä¸²å‘ç”Ÿæ”¹å˜è€Œä¸”**åŒ¹é…æˆåŠŸ**çš„æƒ…å†µä¸‹æ‰ä¼šå‘ç”Ÿå˜åŒ–
##### $`å’Œ$'
è¿™ä¸¤ä¸ªå±æ€§åˆ†åˆ«æ˜¯`leftContext`å’Œ`rightConext`çš„åˆ«åï¼Œåˆ†åˆ«è¡¨ç¤ºåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²å·¦è¾¹çš„å­å­—ç¬¦ä¸²å’Œå³è¾¹çš„å­å­—ç¬¦ä¸²:
```js
var re = /\s/g;
var str = 'hello hello world';
re.test(str);
RegExp['$&'];//' '
RegExp['$`'];//'hello'
RegExp["$'"];//'hello world'
re.test(str);
RegExp['$&'];//' '
RegExp['$`'];//'hello hello'
RegExp["$'"];//'world'
RegExp['$`'] + RegExp['$&'] + RegExp["$'"] === RegExp["$_"]//true
```
äºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªä¸Šé¢æœ€åä¸€ä¸ªç¥å¥‡çš„å…¬å¼ï¼ŒåŒ¹é…çš„å­—ç¬¦ä¸²+å·¦è¾¹çš„å­—ç¬¦ä¸²+å³è¾¹çš„å­—ç¬¦ä¸²===è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸”ï¼Œè¿™ä¸ªå…¬å¼åœ¨testçš„ç»“æœä¸º`false`æ—¶ä¹Ÿç›¸ç­‰
##### $+ ï¼ŒastParençš„åˆ«å
```js
re = /(a(b)c)/g
re.test('abcd')//true
RegExp["$+"]//"b"
re = /(a(b)(c))/g
RegExp["$+"]//"b"
re.test('abcd')//true
RegExp["$+"]//"c"æœ€åä¸€ä¸ªæ•è·
```
æ­£åˆ™åŒ¹é…æˆåŠŸåï¼Œè¿™ä¸ªå±æ€§ä¼šè®°å½•æœ€åä¸€ä¸ªæ•è·ï¼Œå¦‚æœæœ‰çš„è¯
##### 

### æ­£åˆ™è¡¨è¾¾å¼çš„flag

### æ­£åˆ™è¡¨è¾¾å¼çš„æ ·å¼åˆ†ç±»

#### é‡è¯å’Œgreedy

#### å–å…¶ä¸­ä¹‹ä¸€

#### æ•è·é --()

### æ­£åˆ™ç›¸å…³demo

##### å‚è€ƒ
