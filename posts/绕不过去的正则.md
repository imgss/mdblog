
---
title: 绕不过去的正则
tags: js re
date: 2017-7-2 09:48:39
---
### 正则的属性

正则怪异的写法，常常让人望而却步，但是只要我们要处理`string`,正则便绕不过去。所以这里系统整理一下，权当笔记。

懒的不想写，一定补上

### 正则表达式语法
有两种方式得到一个正则表达式实例，调用构造函数,或者字面量写法,得到的是一个正则表达式的对象。
```js
var a = /a/i;
var b = new RegExp('b','i');
```
### RegExp.prototype上的属性
正则原型上的属性,大部分是对正则实例有没有g,m,i,u这些flag的描述。
```js
var a = /a/gmi;
a.flags //"gim"
a.global //true 'g'
a.ignoreCase//true 'i'
a.multiline//true 'm'
a.unicode//false
a.sticky//false
a.source // 'a'
```
### 正则表达式实例的属性 lastIndex
```js
a.lastIndex //0
a.test('cba')//true
a.lastIndex//3
```
每生成一个正则表达式实例，这个实例会有上面的继承自原型的属性，和实例自己的`lastIndex`属性，这个属性会记录正则上一次匹配到的位置,和test方法是一对好👬
```js
var b = /b/g
var str = 'bababa'
b.lastIndex //0
b.test(str)//true
b.lastIndex//1
b.test(str)//true
b.lastIndex//3
b.test(str)//true 从str[3]开始匹配
b.lastIndex//5 到达末尾
b.test(str)//false
b.lastIndex//0
```
lastIndex是一个可写的属性，比如让正则从4开始匹配

```js
b.lastIndex = 4;
b.test(str)//true 到底了
b.test(str)//false
```
### RegExp原型上的方法
常用的主要有`exec()`,`test()`方法,上面的例子已经说明了test()方法的一部分特性,返回一个布尔值,如果是全局匹配,则每调用一次test()方法,只要匹配成功了,正则实例的lastIndex都会发生改变,同时下一次匹配会从lastIndex的位置开始,直到字符串末尾.下面我们看一下`exec()`方法是不是会有一样的特性:
```js
var b = /b/g;
var str = 'bababa';
> var b = /b/g
undefined
> var str = 'bababa'
undefined
> b.exec(str)
[ 'b', index: 0, input: 'bababa' ]
b.lastIndex //1
b.exec(str) //[ 'b', index: 2, input: 'bababa' ]
b.lastIndex //3
b.exec(str) //[ 'b', index: 4, input: 'bababa' ]
b.lastIndex //5
b.exec(str) //null
b.exec(str) //[ 'b', index: 0, input: 'bababa' ]
```
可以看出在记录上一次匹配位置的特点上面,这两个方法是相同的.但是,从返回值上看,exec返回一个包含更全面的信息的数组,包括匹配到的字符串,匹配成功的位置,输入的字符串等.所以exec方法是更全面的方法.
### RegExp构造函数上的奇葩属性
如果你在控制台里输入`console.dir(RegExp)`,会看到下面的画面:
![](http://images2015.cnblogs.com/blog/1016471/201707/1016471-20170703224536550-1189911897.png)
这让我们不禁想到了那句话:
>老鼠的儿子会打洞
正则长的奇形怪状,连它的属性都一股满满的正则风😱,除了几个少数正常的之外,纷纷都是`$`字辈的,`$`字辈在js界可以算的上大名鼎鼎了,下面我们来一个个看一下这些`$`字辈的属性:

### 正则表达式的flag

### 正则表达式的样式分类

#### 量词和greedy

#### 取其中之一

#### 捕获靠--()

### 正则相关demo

##### 参考
